<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="es">
  <head>
    <meta charset="UTF-8">
    <title>NESSFIT | Arrendar</title>
    <link rel="icon" th:href="@{/images/nessfit-logo.png}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/login-nessfit-logo.css}">
    <link rel="stylesheet" th:href="@{/css/shortcut-logos.css}">
    <link rel="stylesheet" th:href="@{/css/nav-bar.css}">
    <link rel="stylesheet" th:href="@{/css/manage-clients.css}">
    <link rel="stylesheet" th:href="@{/css/background-font-style.css}">
    <link rel="stylesheet" th:href="@{/css/confirmation-modal.css}">
  </head>
  <body>
    <div class="nessfit-logo-container">
      <a th:href="@{/home}">
        <img class = "nessfit-logo-home" th:src="@{/images/nessfit-logo.png}" alt = "Nessfit logo">
      </a>
    </div>
    <div class="shortcuts-logo-container">
      <a th:href="@{/home}">
        <img class="logos" th:src="@{/images/home-logo.png}" alt="Inicio">
      </a>
      <a th:href="@{/account-settings}">
        <img class="logos" th:src="@{/images/settings-logo.png}" alt="Configuración de cuenta">
      </a>
      <a th:href="@{/logout}">
        <img class="logos" th:src="@{/images/logout-logo.png}" alt="Cerrar sesión">
      </a>
    </div>
    <nav class="navbar fixed-top ">
      <div class="container-fluid">
        <button class="navbar-toggler position-absolute top-50 start-0 border border-0 m-3 p-2" type="button"
                data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title mt-3" id="offcanvasNavbarLabel">NESSFIT</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
              <li class="nav-item">
                <a class="nav-link" href="#">Arrendar</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Mis Solicitudes</a>
              </li>
              <li class="nav-item mt-5">
                <a class="nav-link" th:href="@{/account-settings}">Configuración de cuenta</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" th:href="@{/logout}">Cerrar Sesión</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <script th:href="@{/js/rent.js}"></script>
    <h1>Arrendar</h1>

    <div class="center-selection-container">
      <th:block th:each="center : ${centers}">
        <a th:href="@{/cliente/rent(id=${center.name})}" th:class="${param.id == center.name}? selection">
          <p th:text="${center.name}"> <span th:text="${center.type.name}"></span> </p>
        </a>
      </th:block>
    </div>

    <div class="form-container" th:if="${selection ne null}">
      <h2 th:text="${selection.name}"></h2>
      <p>Costo Diario: <span th:text="${selection.costPerDay}"></span></p>
      <p>Dirección: <span th:text="${selection.address}"></span></p>
        <h3>Seleccione los días que quiere arrendar</h3>
        <table>
          <tr th:each="date : ${dates}">
            <th class="date-label" th:id="'date'+${dateStat.index}" th:text="${date}"></th>
          </tr>
          <tr th:each="date : ${avaliable}">
            <td class="date-button" th:if="${date}" th:id="${dateStat.index}"></td>
            <td th:unless="${date}"></td>
            </input>
          </tr>
        </table>
      <form>
        <input type="hidden" name="center" id="center" th:value="${selection.name}">
        <input type="hidden" name="dates" id="dates" value="">
        <input type="hidden" name="total" id="total" value="">

        <div class="position-absolute bottom-0 end-0 m-5" id="send-button">
          <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                  data-bs-target="#dataConfirmModal">
            Enviar
          </button>
        </div>

        <div class="modal fade" id="dataConfirmModal" tabindex="-1" aria-labelledby="dataConfirmModalLabel"
             aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="dataConfirmModalLabel">Confirmar</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p>¿Está seguro?</p>
                <p>El monto total es <span class="confirm-total"></span></p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary"
                        data-bs-dismiss="modal">Cancelar</button>
                <button type="submit" class="btn btn-primary">Aplicar</button>
              </div>
            </div>
          </div>
        </div>

      </form>
    </div>
    <script src="https://cdn.jsdelivr.net/n pm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
            crossorigin="anonymous">
    </script>
  </body>
</html>